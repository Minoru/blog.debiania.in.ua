---
title: Обновление TR401
date: January 29, 2012
---

Двенадцатого января Effire выпустили обновление прошивки для <a
href='http://effire.ru/catalogue/ebooks/colorbook_tr401/'>Colorbook TR401</a> —
небольшого медиаридера, который мне как раз недавно подарили. Учитывая
кривоватость стандартной прошивки, я немедленно приступил к обновлению.

Кстати говоря, впоследствии оказалось, что это не обновление вовсе, а та самая
прошивка, которая была установлена на читалке при покупке. И этого поста вообще
не было бы, если бы инструкция по обновлению, прилагаемая к прошивке, была
работоспособна. Но увы…

Сразу замечу, что для обновления понадобилась настоящая Windows-машина —
XPюшка, запущенная под QEMU, вывалилась в BSOD на одном из диалогов программы
обновления. Запускать же LiveSuit (так называется обновлялка) под Wine я не
пробовал ввиду отсутствия последнего в Debian Wheezy.

Собственно, основная проблема прилагаемой к прошивке инструкции заключается в
том, что предлагается сначала поставить драйвер для устройства, а потом уже
проводить обновление. Но на деле при подключении читалки к компьютеру она сразу
же определяется как USB Mass Storage Device и Windows XP ни в какую не хочет
менять драйвер на тот, что поставляет Effire.

Решается проблема элементарно: сначала запускаем LiveSuit, а потом уже
подключаем ридер к компьютеру. Не знаю, что там делает запущенная обновлялка,
но в такой последовательности устройство уже не считается флешкой и WinXP
требует драйвера, которые мы и подсовываем в полном соответствии с инструкцией.

На всякий случай приведу пошаговое описание процесса обновления:

1. Бекапим книги, фильмы, музыку — всё, что жалко будет потерять, если вдруг
   что-то пойдёт не так. Учтите также, что настройки сбросятся в любом случае,
   так что запомните, что на какой странице читаете. И закладки из книг тоже на
   листочек выпишите.
2. Запускаем LiveSuit.
3. Подключаем читалку.
4. Windows определяет устройство и спрашивает про драйвера, скармливаем
   `usbdrv.inf` согласно инструкции, прилагаемой к прошивке.
5. Устройство переподключается и снова требует драйвер. Я на этом шаге снова
   подсунул мастеру установки usbdrv.inf, но уверен, что можно просто кликать
   *Далее* — драйвер-то мы поставили на предыдущем шаге.
6. Нажимаем SysUpdate.
7. **Важно**: в появившемся диалоге нужно нажать *Да*, иначе процесс обновления
   прекратится с ошибкой «Jump to update mode failed». О данных не волнуйтесь —
   про них ещё раз спросят позже.
8. Спустя некоторое время появится диалог с вопросом о том, хотите ли вы
   форматировать внутреннюю память устройства. Вот это уже возможность потерять
   данные, так что хорошенько подумайте и отвечайте *Нет* ☺
9. Спустя некоторое время появилтся сообщение «Update success!» — поздравляю,
   всё прошло хорошо.
10. Как и написано в инструкции, книга загрузится, попросит подождать, после
    чего предложит откалибровать экран.
11. По завершении этих нехитрых манипуляций можете приступать к восстановлению
    своих настроек.

На этом всё. До новых встреч! 
