---
title: Упрощаем себе жизнь: интеграция bash-скриптов в систему
published: 2008-08-29T16:29:00Z
categories: 
tags: linux
---

Хехе, любопытный заголовочек, не правда ли? Заинтересовало? На самом деле, ничего феноменального или гениального в этой статье описано не будет — просто одна маленькая заметка для новичков в мире linux.<br /><a name='more'></a><br />Итак, все мы знаем, что bash-скрипты — это круто, ибо их легко писать и они здорово облегчают нам жизнь.<br /><br />Возьмём для примера меня :) Я недавно мигрировал с винды, и потому столкнулся с рядом проблем при переносе данных. Основная проблема — кодировки. В Debian я преспокойно поставил себе в качестве кодировки локали UTF-8, но в винде-то CP1251! Поэтому всякие там txt'шные заметки и текстики (а я вообще поклонник принципа «каждой технологии — своё применение», и потому у меня каждый документ по возможности сохранён в формате, наиболее для этого документа подходящем), коих у меня просто море, читаться отказались. То есть не совсем отказались &mdash; KWrite способен прочесть их, но для этого надо сделать два лишних клика. А вот Midnight Commander не заставить понимать CP1251 и тремя кликами (хотя, может, и можно, но тюнинговать его мне откровенно влом, так что я решил повыпендриваться :) ). Да и вообще, UTF-8 рулит, CP1251 - отст… эм… просто альтернативная кодировка :)<br /><br />Естественно, первое время я перегонял CP1251 в UTF8 вручную. Делал я это <code>enconv</code>'ом (входит в пакет <code>enca</code>). Но однажды я открыл сконвертированный txt'шник во встроенном редакторе MC и увидел в конце каждой строки какой-то гадкий чёрный прямоугольник с «крышей» (имеется в виду символ «^»). Призадумавшись, я вспомнил, что в винде для обозначения новой строки применяется CRLF, а в никсах &mdash; LF. Проблема была решена практически моментально (респект гуглу) &mdash; <code>tr -d '\r' &lt;inputfile &gt;outputfile</code> превратит CRLF в LF (<a href="http://en.wikipedia.org/Wiki/Newline">материал из английской википедии</a>). Я объединил <code>enconv</code> с <code>tr</code> и получил вполне приличную конструкцию, которая исправно выполняло поставленную задачу. Но каждый раз вбивать сиё творение мне быстро надоело, и я написал скриптик <code>win2lin</code>:<br /><div class="code"><code>#!/bin/sh<br />enconv "$1" &amp;&amp; tr -d '\r' <"$1" >temp &amp;&amp; mv temp "$1"</code></div>Теперь конвертировать стало проще &mdash; пишем <code>./win2lin имя_конвертируемого_файла</code> и получаем результат. Но постоянно тягать скрипт в ту директорию, где он нужен, быстро надоело; поэтому я поместил его в корневой каталог и конвертировал файлы командой <code>~/win2lin file</code>.<br /><br />А потом я случайно вспомнил про переменные окружения, среди которых оказалась и <code>PATH</code> &mdash; переменная, содержащая пути к исполнимым файлам. Недолго думая, я полез в <code>~/.bashrc</code>, но не нашёл там ничего полезного. Тут мои глаза наткнулись на файлик <code>~/.bash_profile</code> &mdash; и именно там оказался ключик к окончательному решению.<br /><br />В общем, я создал каталог <code>~/scripts</code>, дописал в <code>~/.bash_profile</code> вот это:<br /><div class="code"><code>if [-d ~/scripts] ; then<br />&nbsp;&nbsp;PATH=~/scripts:"${PATH}"<br />fi</code></div>, поместил в <code>~/scripts</code> свой <code>win2lin</code> и возрадовался жизни :)<br /><br /><i><b>Примечание:</b> изменение к <code>.bash_profile</code> подействует только после перезагрузки баша. Если влом (нельзя?) ребутиться, то можно сделать так:</i><br /><div class="code"><code>source ~/.bash_profile</code></div>Спасибо Maxim G. Ivanov'у за совет.<br /><br />Ну вот и всё, именно это я и подразумевал под "интеграцией скриптов в систему". :)<br />Пишите свои сценарии, упрощающие рутинные операции, и кладите их в <code>~/scripts</code>, откуда они будут доступны по первому зову!

<h3 id='hakyll-convert-comments-title'>Comments</h3>
<div class='hakyll-convert-comment'>
<p class='hakyll-convert-comment-date'>On 2009-04-14T14:21:00.000+03:00, Maxim G. Ivanov wrote:</p>
<p class='hakyll-convert-comment-body'>
Очень хорошо написано для новичков!  Думаю, много кому понравится.  Только не проще ли настройки баша обновлять посредством $ source ~/.bashrc ?
</p>
</div>

<div class='hakyll-convert-comment'>
<p class='hakyll-convert-comment-date'>On 2009-04-14T22:07:00.000+03:00, Programmaster wrote:</p>
<p class='hakyll-convert-comment-body'>
Рад, что хоть кому-то это понадобилось :)<br /><br />Заменил своё шаманство с $PATH на source — так правильнее :)
</p>
</div>



