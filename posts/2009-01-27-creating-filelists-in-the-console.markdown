---
title: Создание списков файлов в консоли
published: 2009-01-27T17:41:00Z
categories: 
tags: tips'n'tricks
---

Не раз мне приходилось сталкиваться с задачей сделать список файлов, расположенных в данной директории и её поддиректориях. Каждый раз я находил какое-то решение, но к следующему возникновению аналогичной задачи оно забывалось. В общем, сегодня я решил записать свою уловку — может быть, пригодится не мне одному.<br /><a name='more'></a><br />Сначала я, если позволите, пущусь в небольшое рассуждение на тему «зачем это надо». Итак,<br /><br /><b><font size="+1">Зачем это надо?</font></b><br /><br />Данная уловка пригодится в следующих случаях:<ul><li>нужно сделать список всего аниме, которые есть у тебя на винчестере — например, чтобы переслать по джабберу друзьям, которые не знают, чего посмотреть, и просят у тебя какую-нибудь анимешку;</li><li>сделать «плейлист» манги, которую читаешь; для непосвящённых объясню — сканы манги обычно распространяются в виде изображений, сложенных в директории по главам, а главы, в свою очередь, группируются по томам. Как раз для такого применения уловка и придумана — такие «плейлисты» очень удобно скармливать <code>feh</code>'у, используя опцию <code>-f</code></li><li>ещё тысяча и один случай, пока что не придуманы :D</li></ul><br />Собственно сама уловка:<br /><br /><div class="code"><code>find -type f -print</code></div><br />Легко, правда? :) По вкусу можно добавить такие вот примочки:<br /><br /><div class="code"><code>find -type f -print | sort</code></div><br />отсортирует список по возрастанию (особенно полезно при создании «плейлиста» манги — <code>feh -r ./*</code> имеет обыкновение путать изображения).<br /><br />И ещё одно дополнение, ради которого, собственно говоря, и писался данный пост:<br /><br /><div class="code"><code>curdir=$(pwd | sed 's/\//\\\//g') && find -type f -print | sort | sed "s/./$curdir/"</code></div><br />Соль конструкции в том, что вместо относительных путей в плейлисте будут абсолютные — т.е. его можно будет запустить из любой директории, а не только из той, в которой он был создан.<br /><br />Напоследок маленький совет: если собираетесь использовать эту команду широко, то создайте скрипт следующего содержания:<br /><br /><div class="code"><code>#!/bin/bash<br />curdir=$(pwd | sed 's/\//\\\//g') && find -type f -print | sort | sed "s/./$curdir/"</code></div><br />сохраните его в <code>/usr/bin</code> под каким-нибудь понятным именем (<code>mkfilelist</code>, к примеру), установите бит исполняемости (<code>mode +x mkfilelist</code>) и используйте на здоровье. А лучше поступите так, как я <a href="http://debiania.blogspot.com/2008/08/bash.html">советовал ранее</a>, и не засоряйте системные каталоги.<br /><br />Удачи!

<h3 id='hakyll-convert-comments-title'>Comments</h3>


